<%= t.include("partials/_head.html") %>

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>

<!-- Mapbox GL -->
<link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.1/mapbox-gl.css" rel='stylesheet' />
<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.1/mapbox-gl.js"></script>

<div id="map-leaflet"></div>

<div id="map-overlay" class="map-overlay">

  <div class="banner-logo">
    <a href="http://www.sfchronicle.com" target="_blank">
        <img src="https://projects.sfchronicle.com/shared/logos/sfc_logo_black.png"></img>
    </a>
  </div>
  <div class="title">2018 California Fire Tracker</div>
  <%= t.include("partials/_fullwidthmap-social.html") %>
  <!-- <div class="author">Developed by <a href="mailto:eoneill@sfchronicle.com">Emma O'Neill</a> and <a href="mailto: cwirtanen@sfchronicle.com">Clint Wirtanen</a></div> -->
  <div class="deck">This interactive map developed in The San Francisco Chronicle newsroom provides information on wildfires burning across California.
  <div class="instructions"><i class="fa fa-hand-o-right"></i>Click on the fire listings below to find them on the map or zoom on the map to see details.</div>
</div>

  <div class="button-container">
    <div id="button-collection"></div>
    <div id="calendar"></div>
    <div class="popup" id="popup-nasa-explanation"><i class="fa fa-hand-o-right"></i>What are the fire perimeters?</div>
  </div>

  <div class="legend-container">
    <div class="legend-element"><div class="circle-icon"></div> Current hot spot</div>
    <div class="popup" id="popup-noaa-explanation"><i class="fa fa-hand-o-right"></i>What is a current hot spot?</div>
  </div>
  <div class="timestamp">Fire hot spots updated on <span id="updateID"></span></div>

  <div class="button-container">
    <div class="button" id="airquality">See up-to-date air quality</div>
    <div class="popup" id="popup-airquality-explanation"><i class="fa fa-hand-o-right"></i>What is air quality data?</div>
  </div>
  <div class="timestamp" id="airDate"></div>


  <div id="list-of-fires" class="list-of-fires">
    <% json.FireData.forEach(function(c,cIDX){ %>
      <div class="fire-block" id="block<%=cIDX%>">
        <div class="fire-name"><%=c.FireName%></div>
        <div class="fire-desc"><%=c.Description%></div>
        <div class="fire-acreage"><span class="fire-info-type">Acreage:</span><%=c.Acreage%></div>
        <div class="fire-containment"><span class="fire-info-type">Containment:</span><%=c.Containment %></div>
        <% if (c.Damage){ %>
          <div class="fire-damage"><span class="fire-info-type">Damage:</span><%=c.Damage%></div>
        <% } %>
        <div class="fire-damage"><span class="fire-info-type">Fire began:</span><%=c.StartDate%></div>
        <div class="fire-datasource"><span class="fire-info-type">Source:</span><a href="<%=c.Source%>" target="_blank"><%=c.Agency%></a></div>
      </div>
    <% }); %>
  </div>

  <div class="credit-container"><div class="credit-hed">Credits:</div>
    <div class="entry">Interactive Developer:  <br>Emma O'Neill  &bull; <a href="mailto:eoneill@sfchronicle.com">eoneill@sfchronicle.com</a>   &bull; <a href = "https://twitter.com/emmaruthoneill" target="_blank">@emmaruthoneill</a>
    </div>
    <div class="entry">Data Developer:  <br>Clint Wirtanen  &bull; <a href="mailto:cwirtanen@sfchronicle.com">cwirtanen@sfchronicle.com</a>   &bull; <a href = "https://twitter.com/ClintWirtanen" target="_blank">@ClintWirtanen</a>
    </div>
    <div class="entry">Executive Producer:  <br>Tim O'Rourke  &bull; <a href="mailto:torourke@sfchronicle.com">torourke@sfchronicle.com</a>   &bull; <a href = "https://twitter.com/TimothyORourke" target="_blank">@TimothyORourke</a>
    </div>
    <div class="entry">Researcher:  <br>Audrey DeBruine  &bull; <a href="mailto:audrey.debruine@sfchronicle.com@sfchronicle.com">audrey.debruine@sfchronicle.com</a>   &bull; <a href = "https://twitter.com/acdebruine" target="_blank">@acdebruine</a>
    </div>
  </div>

  </div>

</div>

<div class="air-legend-container" id="airquallegend">
  <div class="swath-text left">Good</div>
  <div class="swath blue-swath0"></div>
  <div class="swath blue-swath1"></div>
  <div class="swath blue-swath2"></div>
  <div class="swath blue-swath3"></div>
  <div class="swath blue-swath4"></div>
  <div class="swath red-swath4"></div>
  <div class="swath red-swath3"></div>
  <div class="swath red-swath2"></div>
  <div class="swath red-swath1"></div>
  <div class="swath red-swath0"></div>
  <div class="swath-text right">Hazardous</div>
</div>

<div class="overlay-aboutthedata" id="aboutthedata-overlay">
  <div class="aboutthedata-box" id="aboutthedata-box">
    <div class="close-button" id="close-data-box"><i class="fa fa-times" aria-hidden="true"></i></div>
    <div id="about-airquality" class="aboutdata hide"><%=t.include("partials/_about_berkeleyair.html") %></div>
    <div id="about-nasa" class="aboutdata hide"><%=t.include("partials/_about_nasa.html") %></div>
    <div id="about-noaa" class="aboutdata hide"><%=t.include("partials/_about_noaa.html") %></div>
  </div>
</div>

<script>
  var blockdata = <%= JSON.stringify(json.FireData) %>;
</script>

<script src="app.js" async></script>

</body>
</html>
